<div class = "login-container">
    <mat-card class="login-card">
        <!--
            <mat-card-header>
                <mat-card-title>ShareFile</mat-card-title>
                <mat-card-subtitle>Sign in to your account</mat-card-subtitle>
            </mat-card-header>
        </!-->

        <mat-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Username</mat-label>
                    <input matInput type="email" formControlName="username" placeholder="your@email.com">
                    <mat-icon matPrefix>person</mat-icon>
                    @if(loginForm.get('username')?.hasError('required')){
                        <mat-error>Username is required</mat-error>
                    }
                    @if (loginForm.get('username')?.hasError('email')) {
                        <mat-error>Invalid username</mat-error>
                    }
                </mat-form-field>

                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Password</mat-label>
                    <input matInput type="password" formControlName="password" placeholder="Enter password">
                    <mat-icon matPrefix>lock</mat-icon>
                    @if(loginForm.get('password')?.hasError('required')){
                        <mat-error>Password is required</mat-error>
                    }
                    @if (loginForm.get('password')?.hasError('minlength')) {
                        <mat-error>Password must be at least 4 characters</mat-error>
                    }
                </mat-form-field>


                <div class="error-message">
                    @if(errorMessage){
                        <mat-icon>error</mat-icon>
                        {{ errorMessage }}
                    }
                </div>


                <button
                        mat-raised-button
                        color="primary"
                        type="submit"
                        class="full-width"
                        [disabled]="loginForm.invalid || isLoading">

                    @if(isLoading){
                        <mat-spinner diameter="20"></mat-spinner>
                    }
                    @if(!isLoading){
                        <span>Sign in</span>
                    }
                </button>


            </form>
        </mat-card-content>

    </mat-card>
</div>