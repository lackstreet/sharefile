quarkus.application.name= Sharefile Backend
quarkus.application.version=${APP_VERSION}
quarkus.http.port=${APP_PORT}
quarkus.http.root-path=/api

# Database
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER}
quarkus.datasource.password=${DB_PASSWORD}
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}

quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# OIDC Keycloak
quarkus.oidc.auth-server-url=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID}
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET}
quarkus.oidc.application-type=web-app

# Token validation
quarkus.oidc.token.issuer=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}
quarkus.oidc.token.audience=account

# Token refresh
quarkus.oidc.token.refresh-expired=true
quarkus.oidc.token.refresh-token-time-skew=10S

# CORS - Richiede dipendenza quarkus-smallrye-cors
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200,http://localhost
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# Security paths
quarkus.http.auth.permission.public.paths=/api/health,/api/health/*,/q/*
quarkus.http.auth.permission.public.policy=permit

quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# Proactive auth - false per permettere endpoint pubblici
quarkus.http.auth.proactive=false

# Security JWT
mp.jwt.verify.publickey.location=http://localhost/auth/realms/sharefile/protocol/openid-connect/certs
mp.jwt.verify.issuer=http://localhost/auth/realms/sharefile
quarkus.security.jaxrs.deny-unannotated-endpoints=false

# Keycloak Admin Client (CUSTOM PROPERTIES - non standard Quarkus)
# NOTA: Queste vanno lette manualmente nel codice
keycloak.server-url=${KEYCLOAK_URL}
keycloak.realm=sharefile
keycloak.admin.username=${KEYCLOAK_ADMIN_USER}
keycloak.admin.password=${KEYCLOAK_ADMIN_PASSWORD}
keycloak.admin.client-id=admin-cli
keycloak.admin.connection-pool-size=10
keycloak.admin.connection-timeout=60000

# Email config (CUSTOM PROPERTIES)
keycloak.email.verification.enabled=true
keycloak.email.welcome.enabled=false

# Mailer
quarkus.mailer.mock=false
quarkus.mailer.from=streetblack98@gmail.com
quarkus.mailer.host=smtp.gmail.com
quarkus.mailer.port=587
quarkus.mailer.start-tls=REQUIRED
quarkus.mailer.username=streetblack98@gmail.com
quarkus.mailer.password=veav vlan cplr xymt

# Azure Storage
azure.storage.connection-string=DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://localhost:10000/devstoreaccount1;
azure.storage.container-name=sharefile-files

# Health
quarkus.smallrye-health.root-path=/health

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.laminam.sharefile".level=DEBUG
quarkus.log.category."io.quarkus.oidc".level=DEBUG

# Swagger
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.enable=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.path=/openapi
quarkus.smallrye-openapi.info-title=ShareFile API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API per ShareFile - Sistema di condivisione file Laminam

# Scheduler
quarkus.scheduler.enabled=true
quarkus.scheduler.start-mode=forced
sharefile.jobs.cleanup-expired.enabled=true
sharefile.jobs.cleanup-expired.cron=0 0 1 * * ?

# Dev mode
%dev.quarkus.log.console.enable=true
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.http.cors.origins=*