quarkus.application.name=ShareFile Backend
quarkus.application.version=1.0.0

# HTTP Configuration
quarkus.http.port=8081
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200,http://localhost:3000
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Database Configuration (PostgreSQL)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:sharefile-db-user}
quarkus.datasource.password=${DB_PASSWORD:sharefile-db-password}
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5431}/${DB_NAME:sharefile}

# Hibernate/JPA Configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Keycloak OIDC Configuration (per autenticazione frontend)
quarkus.oidc.auth-server-url=${KEYCLOAK_URL:http://localhost:8080}/realms/${KEYCLOAK_REALM:sharefile}
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID:sharefile-backend}
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:hkLdrNRfnmHhtx6VTaSueEIycRnUouM8}
quarkus.oidc.tls.verification=none
quarkus.oidc.application-type=service

# Keycloak Admin Configuration per creare utenti
keycloak.server-url=${KEYCLOAK_URL:http://localhost:8080}
keycloak.realm=${KEYCLOAK_REALM:sharefile}
keycloak.admin.username=${KEYCLOAK_ADMIN_USER:sharefile-keycloak-user}
keycloak.admin.password=${KEYCLOAK_ADMIN_PASSWORD:sharefile-keycloak-password}
keycloak.admin.client-id=${KEYCLOAK_ADMIN_CLIENT_ID:admin-cli}

# Configurazioni specifiche per creazione utenti
keycloak.admin.connection-pool-size=${KEYCLOAK_POOL_SIZE:10}
keycloak.admin.connection-timeout=${KEYCLOAK_TIMEOUT:60000}

# Email settings per verification
keycloak.email.verification.enabled=${KEYCLOAK_EMAIL_VERIFICATION:true}
keycloak.email.welcome.enabled=${KEYCLOAK_WELCOME_EMAIL:false}

# Autenticazione JWT
quarkus.security.auth.enabled=true
quarkus.security.auth.mechanism.basic=false
quarkus.security.auth.mechanism.form=false

# JWT Validation
mp.jwt.verify.publickey.location=${quarkus.oidc.auth-server-url}/protocol/openid-connect/certs
mp.jwt.verify.issuer=${quarkus.oidc.auth-server-url}

# Security Configuration
quarkus.http.auth.basic=false
quarkus.security.jaxrs.deny-unannotated-endpoints=false

# MinIO Configuration per file storage
minio.endpoint=${MINIO_ENDPOINT:http://localhost:9000}
minio.access-key=${MINIO_ACCESS_KEY:admin}
minio.secret-key=${MINIO_SECRET_KEY:password123}
minio.bucket-name=${MINIO_BUCKET_NAME:sharefile-files}

# File Upload Configuration
quarkus.http.limits.max-body-size=1G
quarkus.http.body.uploads-directory=${java.io.tmpdir}/uploads

# Application Configuration
app.max-file-size-bytes=${MAX_FILE_SIZE_BYTES:1073741824}
app.max-files-per-upload=${MAX_FILES_PER_UPLOAD:10}
app.default-link-expiry-days=${DEFAULT_LINK_EXPIRY_DAYS:7}

# Health Checks
quarkus.smallrye-health.root-path=/health

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."com.company.sharefile".level=DEBUG
quarkus.log.category."com.company.sharefile.security".level=DEBUG
quarkus.log.category."com.company.sharefile.service.UserService".level=DEBUG
quarkus.log.category."org.keycloak.admin.client".level=INFO

# Development Configuration
%dev.quarkus.log.console.enable=true
%dev.quarkus.log.level=DEBUG
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.datasource.username=sharefile-db-user
%dev.quarkus.datasource.password=sharefile-db-password
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5431/sharefile


# Swagger/OpenAPI Configuration
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.enable=true
quarkus.swagger-ui.path=/swagger-ui

# OpenAPI info
quarkus.smallrye-openapi.info.title=ShareFile API
quarkus.smallrye-openapi.info.version=1.0.0
quarkus.smallrye-openapi.info.description=WeTransfer-like file sharing API for company use
quarkus.smallrye-openapi.info.contact.name=ShareFile Team
quarkus.smallrye-openapi.info.contact.email=dev@company.com

# Performance & Debugging
quarkus.live-reload.instrumentation=false
%dev.quarkus.live-reload.instrumentation=false
%dev.quarkus.transaction-manager.default-transaction-timeout=300s
quarkus.narayana.jta.processing-timeout=60s
quarkus.rest-client.keycloak.url=${KEYCLOAK_URL:http://localhost:8080}
upload.directory=/opt/uploads
