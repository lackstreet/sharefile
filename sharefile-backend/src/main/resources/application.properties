quarkus.application.name=ShareFile Backend
quarkus.application.version=1.0.0
quarkus.http.port=8081
quarkus.http.host=0.0.0.0

# File upload
quarkus.http.limits.max-body-size=1G
quarkus.http.body.uploads-directory=${java.io.tmpdir}/uploads
quarkus.http.body.handle-file-uploads=true
quarkus.http.body.delete-uploaded-files-on-end=true
quarkus.http.body.preallocate-body-buffer=false

# Database
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:sharefile-db-user}
quarkus.datasource.password=${DB_PASSWORD:sharefile-db-password}
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5431}/${DB_NAME:sharefile}

quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# OIDC Keycloak
quarkus.oidc.auth-server-url=${KEYCLOAK_URL:http://localhost:8080}/realms/${KEYCLOAK_REALM:sharefile}
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID:sharefile-backend}
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:wgXYHaW4aX9VqSsFSd1GNZJcQaTuXjeU}
quarkus.oidc.application-type=web-app

# PKCE
quarkus.oidc.authentication.pkce-required=true

# Redirect paths
quarkus.oidc.authentication.redirect-path=/callback
quarkus.oidc.authentication.restore-path-after-redirect=true
quarkus.oidc.authentication.cookie-path=/
quarkus.oidc.authentication.cookie-path-header=X-Forwarded-Prefix

# Session config
quarkus.oidc.authentication.session-age-extension=30M
quarkus.oidc.authentication.cookie-same-site=lax
quarkus.oidc.token.refresh-expired=true
quarkus.oidc.token.refresh-token-time-skew=10S

# Encryption key
quarkus.http.auth.session.encryption-key=changeit1234567890123456789012

# CORS
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# Security paths
quarkus.http.auth.permission.public.paths=/health,/q/*
quarkus.http.auth.permission.public.policy=permit

quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# Proactive auth
quarkus.http.auth.proactive=true

# Keycloak Admin
keycloak.server-url=${KEYCLOAK_URL:http://localhost:8080}
keycloak.realm=${KEYCLOAK_REALM:sharefile}
keycloak.admin.username=${KEYCLOAK_ADMIN_USER:sharefile-keycloak-user}
keycloak.admin.password=${KEYCLOAK_ADMIN_PASSWORD:sharefile-keycloak-password}
keycloak.admin.client-id=${KEYCLOAK_ADMIN_CLIENT_ID:admin-cli}
keycloak.admin.connection-pool-size=${KEYCLOAK_POOL_SIZE:10}
keycloak.admin.connection-timeout=${KEYCLOAK_TIMEOUT:60000}

# Email
keycloak.email.verification.enabled=${KEYCLOAK_EMAIL_VERIFICATION:true}
keycloak.email.welcome.enabled=${KEYCLOAK_WELCOME_EMAIL:false}

# Mailer
quarkus.mailer.mock=false
quarkus.mailer.from=streetblack98@gmail.com
quarkus.mailer.host=smtp.gmail.com
quarkus.mailer.port=587
quarkus.mailer.start-tls=REQUIRED
quarkus.mailer.username=streetblack98@gmail.com
quarkus.mailer.password=veav vlan cplr xymt

# Security
mp.jwt.verify.publickey.location=${quarkus.oidc.auth-server-url}/protocol/openid-connect/certs
mp.jwt.verify.issuer=${quarkus.oidc.auth-server-url}
quarkus.security.jaxrs.deny-unannotated-endpoints=false

# Azure Storage
azure.storage.connection-string=${AZURE_STORAGE_CONNECTION_STRING:DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;}
azure.storage.container-name=${AZURE_STORAGE_CONTAINER:sharefile-files}

# Health
quarkus.smallrye-health.root-path=/health

# Logging
quarkus.log.level=DEBUG
quarkus.log.category."com.company.sharefile".level=DEBUG
quarkus.log.category."io.quarkus.oidc".level=DEBUG

# Swagger
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.enable=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.info-title=ShareFile API
quarkus.smallrye-openapi.info-version=1.0.0

# Scheduler
quarkus.scheduler.enabled=true
quarkus.scheduler.start-mode=forced
sharefile.jobs.cleanup-expired.enabled=true
sharefile.jobs.cleanup-expired.cron=0 0 1 * * ?

# Dev mode
%dev.quarkus.log.console.enable=true
%dev.quarkus.hibernate-orm.log.sql=true